# ğŸ“¬ CHAPTER 3: KAFKA ESSENTIAL COMMANDS
# 
# ğŸ¯ GOAL: Learn how to create topics, send messages, and receive messages
# Think of this like learning how to use a post office!
#
# ğŸ“š WHAT YOU'LL LEARN:
# - How to create "mailboxes" (topics) in Kafka
# - How to send "letters" (messages) to topics
# - How to read "mail" (consume messages) from topics
# - How to manage and delete topics

# ğŸš€ STEP 1: LOG INTO THE KAFKA CONTAINER
# This is like walking into the post office to use their equipment

docker exec -it kafka-broker /bin/bash

# ğŸ” WHAT THIS COMMAND DOES:
# - docker exec: Run a command inside a running container
# - -it: Interactive mode (lets you type commands)
# - kafka-broker: Name of the Kafka container
# - /bin/bash: Start a command shell inside the container
#
# You should see a prompt like: root@abc123:/opt/bitnami/kafka#

# ğŸ—‚ï¸ STEP 2: NAVIGATE TO KAFKA TOOLS DIRECTORY
# This is like going to the customer service desk with all the forms

cd /opt/bitnami/kafka/bin

# ğŸ” WHAT THIS DOES:
# - cd: Change directory (move to a different folder)
# - This folder contains all the Kafka command-line tools
# - Like going to the part of the post office with all the services

# ğŸ“« STEP 3: CREATING NEW TOPICS (MAILBOXES)
# Topics are like different mailboxes for different types of messages

# Create a "tweets" topic (like a mailbox for social media messages)
./kafka-topics.sh \
    --bootstrap-server localhost:29092 \
    --create \
    --topic kafka.learning.tweets \
    --partitions 1 \
    --replication-factor 1

# ğŸ” WHAT EACH PART MEANS:
# - ./kafka-topics.sh: Tool for managing topics
# - --bootstrap-server localhost:29092: Where to find Kafka
# - --create: "I want to create a new topic"
# - --topic kafka.learning.tweets: Name of the new mailbox
# - --partitions 1: Create 1 section in this mailbox (more = faster processing)
# - --replication-factor 1: Keep 1 copy (more = safer but uses more space)

# Create an "alerts" topic (like a mailbox for important notifications)
./kafka-topics.sh \
    --bootstrap-server localhost:29092 \
    --create \
    --topic kafka.learning.alerts \
    --partitions 1 \
    --replication-factor 1

# ğŸ’¡ BEGINNER TIP: Topic Naming
# - Use descriptive names like "user.registration" or "order.updates"
# - Use dots (.) to organize: company.team.purpose
# - Avoid spaces and special characters

# ğŸ“‹ STEP 4: LIST ALL TOPICS (SEE ALL MAILBOXES)
# This shows you all the topics that exist

./kafka-topics.sh \
    --bootstrap-server localhost:29092 \
    --list

# ğŸ” WHAT YOU'LL SEE:
# A list of topic names, like:
# kafka.learning.tweets
# kafka.learning.alerts
# __consumer_offsets (Kafka's internal topic - ignore this one)

# ğŸ” STEP 5: GET DETAILS ABOUT A TOPIC
# This shows detailed information about a specific topic

./kafka-topics.sh \
    --bootstrap-server localhost:29092 \
    --describe \
    --topic kafka.learning.tweets

# ğŸ” WHAT YOU'LL SEE:
# - Topic name and configuration
# - Number of partitions
# - Replication factor
# - Which server (broker) handles each partition

# ğŸ“¤ STEP 6: SEND MESSAGES TO A TOPIC (MAIL LETTERS)
# This opens an interactive tool to send messages

./kafka-console-producer.sh \
    --bootstrap-server localhost:29092 \
    --topic kafka.learning.tweets

# ğŸ” WHAT HAPPENS:
# - You'll see a prompt where you can type messages
# - Type a message and press Enter to send it
# - Each line you type becomes a separate message
# - Press Ctrl+C to exit when you're done
#
# Example messages to try:
# Hello from Kafka!
# This is my first message
# Learning Kafka is fun!

# ğŸ’¡ PRODUCER TIP:
# - Each line becomes one message
# - Messages are sent immediately when you press Enter
# - You can send thousands of messages this way

# ğŸ“¥ STEP 7: READ MESSAGES FROM A TOPIC (CHECK MAIL)
# This opens a tool to read messages from a topic

./kafka-console-consumer.sh \
    --bootstrap-server localhost:29092 \
    --topic kafka.learning.tweets \
    --from-beginning

# ğŸ” WHAT HAPPENS:
# - Shows all messages from the beginning of the topic
# - Displays new messages as they arrive
# - Keeps running until you press Ctrl+C
# - Like watching a live feed of all messages

# ğŸ’¡ CONSUMER TIPS:
# - --from-beginning: Shows all old messages first
# - Without --from-beginning: Only shows new messages
# - You can run multiple consumers - they'll all get the same messages
# - Try opening another terminal and running a producer while consumer is running!

# ğŸ—‘ï¸ STEP 8: DELETE A TOPIC (REMOVE A MAILBOX)
# This permanently removes a topic and all its messages

./kafka-topics.sh \
    --bootstrap-server localhost:29092 \
    --delete \
    --topic kafka.learning.alerts

# âš ï¸ WARNING: This is permanent!
# - All messages in the topic will be lost
# - The topic will be completely removed
# - Be very careful with this command in real projects

# ğŸ“ IMPORTANT CONCEPTS FOR BEGINNERS:

# ğŸ“« TOPICS:
# - Like mailboxes or chat channels
# - Each topic stores messages about a specific subject
# - Examples: user-events, order-updates, error-logs

# ğŸ”¢ PARTITIONS:
# - Divide a topic into smaller sections
# - More partitions = faster processing (parallel consumers)
# - Messages with same key go to same partition

# ğŸ“‹ REPLICATION FACTOR:
# - How many copies of each message to keep
# - Higher number = safer (if one server fails, others have the data)
# - Uses more storage space

# ğŸƒâ€â™‚ï¸ PRODUCERS:
# - Applications or tools that send messages
# - Like people writing letters to put in mailboxes
# - Can send millions of messages per second

# ğŸ“¬ CONSUMERS:
# - Applications or tools that read messages
# - Like mail carriers collecting letters from mailboxes
# - Can process messages individually or in groups

# ğŸ¯ HANDS-ON EXERCISES TO TRY:

# Exercise 1: Message Relay
# 1. Open two terminals
# 2. In terminal 1: Start a consumer for tweets topic
# 3. In terminal 2: Start a producer for tweets topic
# 4. Type messages in terminal 2 and watch them appear in terminal 1

# Exercise 2: Multiple Consumers
# 1. Start 2 consumers for the same topic
# 2. Send messages from a producer
# 3. Notice both consumers get the same messages

# Exercise 3: Topic Management
# 1. Create 3 topics with different names
# 2. List all topics to see them
# 3. Send messages to each topic
# 4. Read messages from each topic
# 5. Delete one topic and verify it's gone

# ğŸš¨ TROUBLESHOOTING TIPS:

# Problem: "Command not found"
# Solution: Make sure you're in the /opt/bitnami/kafka/bin directory

# Problem: "Connection refused"
# Solution: Make sure Kafka is running (check with "docker ps")

# Problem: "Topic already exists"
# Solution: Use a different topic name or delete the existing one

# Problem: Consumer shows no messages
# Solution: Make sure you're using the correct topic name and try --from-beginning

# ğŸ¯ NEXT STEPS:
# Now you know the basics! Next you can:
# 1. Learn about consumer groups
# 2. Explore message keys and partitioning
# 3. Build applications that use these concepts
# 4. Set up multiple brokers for high availability





